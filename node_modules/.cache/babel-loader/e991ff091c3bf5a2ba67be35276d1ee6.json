{"remainingRequest":"C:\\Users\\Brezgo-1098\\Desktop\\brezz\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Brezgo-1098\\Desktop\\brezz\\src\\logic\\stream.js","dependencies":[{"path":"C:\\Users\\Brezgo-1098\\Desktop\\brezz\\src\\logic\\stream.js","mtime":1587032502000},{"path":"C:\\Users\\Brezgo-1098\\Desktop\\brezz\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Brezgo-1098\\Desktop\\brezz\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX29iamVjdFNwcmVhZCBmcm9tICJDOlxcVXNlcnNcXEJyZXpnby0xMDk4XFxEZXNrdG9wXFxicmV6elxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICJDOlxcVXNlcnNcXEJyZXpnby0xMDk4XFxEZXNrdG9wXFxicmV6elxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmV4cG9ydCBmdW5jdGlvbiBnZXREZXZpY2VzKCkgewogIHJldHVybiBfZ2V0RGV2aWNlcy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9CgpmdW5jdGlvbiBfZ2V0RGV2aWNlcygpIHsKICBfZ2V0RGV2aWNlcyA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDA7CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIG5hdmlnYXRvci5tZWRpYURldmljZXMuZW51bWVyYXRlRGV2aWNlcygpKTsKCiAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSA0OwogICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0WyJjYXRjaCJdKDApOwogICAgICAgICAgICBjb25zb2xlLndhcm4oJ2VudW1lcmF0ZURldmljZXMgZXJyJywgX2NvbnRleHQudDApOwoKICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgW10pOwoKICAgICAgICAgIGNhc2UgODoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlLCBudWxsLCBbWzAsIDRdXSk7CiAgfSkpOwogIHJldHVybiBfZ2V0RGV2aWNlcy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9CgpleHBvcnQgdmFyIGJhbmR3aWR0aFZpZGVvQ29uc3RyYWludHMgPSB7CiAgdmlkZW86IHsKICAgIHdpZHRoOiB7CiAgICAgIGlkZWFsOiAzMjAKICAgIH0sCiAgICBoZWlnaHQ6IHsKICAgICAgaWRlYWw6IDI0MAogICAgfQogIH0sCiAgd2lkdGg6IHsKICAgIGlkZWFsOiAzMjAKICB9LAogIGhlaWdodDogewogICAgaWRlYWw6IDI0MAogIH0KfTsKZXhwb3J0IHZhciBkZWZhdWx0VmlkZW9Db25zdHJhaW50cyA9IHsKICBmcmFtZVJhdGU6IHsKICAgIG1pbjogMSwKICAgIGlkZWFsOiAxNQogIH0KfTsKZXhwb3J0IHZhciBkZWZhdWx0QXVkaW9Db25zdHJhaW50cyA9IHsKICBlY2hvQ2FuY2VsbGF0aW9uOiB0cnVlLAogIG5vaXNlU3VwcHJlc3Npb246IHRydWUsCiAgYXV0b0dhaW5Db250cm9sOiB0cnVlCn07CmV4cG9ydCBmdW5jdGlvbiBnZXRVc2VyTWVkaWEoKSB7CiAgcmV0dXJuIF9nZXRVc2VyTWVkaWEuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQoKZnVuY3Rpb24gX2dldFVzZXJNZWRpYSgpIHsKICBfZ2V0VXNlck1lZGlhID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgIHZhciBjb25zdHJhaW50cywKICAgICAgICBfYXJnczIgPSBhcmd1bWVudHM7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBjb25zdHJhaW50cyA9IF9hcmdzMi5sZW5ndGggPiAwICYmIF9hcmdzMlswXSAhPT0gdW5kZWZpbmVkID8gX2FyZ3MyWzBdIDogewogICAgICAgICAgICAgIGF1ZGlvOiBfb2JqZWN0U3ByZWFkKHt9LCBkZWZhdWx0QXVkaW9Db25zdHJhaW50cyksCiAgICAgICAgICAgICAgdmlkZW86IF9vYmplY3RTcHJlYWQoe30sIGRlZmF1bHRWaWRlb0NvbnN0cmFpbnRzLCB7CiAgICAgICAgICAgICAgICBmYWNpbmdNb2RlOiAndXNlcicKICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9OwogICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDE7CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iLCBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYShjb25zdHJhaW50cykpOwoKICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgX2NvbnRleHQyLnByZXYgPSA1OwogICAgICAgICAgICBfY29udGV4dDIudDAgPSBfY29udGV4dDJbImNhdGNoIl0oMSk7CiAgICAgICAgICAgIGNvbnNvbGUud2FybignZ2V0VXNlck1lZGlhIGVycicsIF9jb250ZXh0Mi50MCk7CgogICAgICAgICAgY2FzZSA4OgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlMiwgbnVsbCwgW1sxLCA1XV0pOwogIH0pKTsKICByZXR1cm4gX2dldFVzZXJNZWRpYS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9"},{"version":3,"sources":["C:/Users/Brezgo-1098/Desktop/brezz/src/logic/stream.js"],"names":["getDevices","navigator","mediaDevices","enumerateDevices","console","warn","bandwidthVideoConstraints","video","width","ideal","height","defaultVideoConstraints","frameRate","min","defaultAudioConstraints","echoCancellation","noiseSuppression","autoGainControl","getUserMedia","constraints","audio","facingMode"],"mappings":";;;AAAA,gBAAsBA,UAAtB;AAAA;AAAA;;;wEAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6CAEIC,SAAS,CAACC,YAAV,CAAuBC,gBAAvB,EAFJ;;AAAA;AAAA;AAAA;AAIHC,YAAAA,OAAO,CAACC,IAAR,CAAa,sBAAb;;AAJG;AAAA,6CAME,EANF;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;;;AASP,OAAO,IAAIC,yBAAyB,GAAG;AACrCC,EAAAA,KAAK,EAAE;AACLC,IAAAA,KAAK,EAAE;AAAEC,MAAAA,KAAK,EAAE;AAAT,KADF;AAELC,IAAAA,MAAM,EAAE;AAAED,MAAAA,KAAK,EAAE;AAAT;AAFH,GAD8B;AAKrCD,EAAAA,KAAK,EAAE;AAAEC,IAAAA,KAAK,EAAE;AAAT,GAL8B;AAMrCC,EAAAA,MAAM,EAAE;AAAED,IAAAA,KAAK,EAAE;AAAT;AAN6B,CAAhC;AASP,OAAO,IAAIE,uBAAuB,GAAG;AACnCC,EAAAA,SAAS,EAAE;AACTC,IAAAA,GAAG,EAAE,CADI;AAETJ,IAAAA,KAAK,EAAE;AAFE;AADwB,CAA9B;AAOP,OAAO,IAAIK,uBAAuB,GAAG;AACnCC,EAAAA,gBAAgB,EAAE,IADiB;AAEnCC,EAAAA,gBAAgB,EAAE,IAFiB;AAGnCC,EAAAA,eAAe,EAAE;AAHkB,CAA9B;AAMP,gBAAsBC,YAAtB;AAAA;AAAA;;;0EAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA4BC,YAAAA,WAA5B,8DAA0C;AAC/CC,cAAAA,KAAK,oBACAN,uBADA,CAD0C;AAI/CP,cAAAA,KAAK,oBACAI,uBADA;AAEHU,gBAAAA,UAAU,EAAE;AAFT;AAJ0C,aAA1C;AAAA;AAAA,8CAYIpB,SAAS,CAACC,YAAV,CAAuBgB,YAAvB,CAAoCC,WAApC,CAZJ;;AAAA;AAAA;AAAA;AAcHf,YAAAA,OAAO,CAACC,IAAR,CAAa,kBAAb;;AAdG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G","sourcesContent":["export async function getDevices() {\n  try {\n    return navigator.mediaDevices.enumerateDevices()\n  } catch (err) {\n    console.warn('enumerateDevices err', err)\n  }\n  return []\n}\n\nexport let bandwidthVideoConstraints = {\n  video: {\n    width: { ideal: 320 },\n    height: { ideal: 240 },\n  },\n  width: { ideal: 320 },\n  height: { ideal: 240 },\n}\n\nexport let defaultVideoConstraints = {\n  frameRate: {\n    min: 1,\n    ideal: 15,\n  },\n}\n\nexport let defaultAudioConstraints = {\n  echoCancellation: true,\n  noiseSuppression: true,\n  autoGainControl: true,\n}\n\nexport async function getUserMedia(constraints = {\n  audio: {\n    ...defaultAudioConstraints,\n  },\n  video: {\n    ...defaultVideoConstraints,\n    facingMode: 'user',\n  },\n}) {\n  try {\n    // Solution via https://stackoverflow.com/a/47958949/140927\n    // Only available for HTTPS! See https://developer.mozilla.org/en-US/docs/Web/API/MediaDevices/getUserMedia#Security\n    return navigator.mediaDevices.getUserMedia(constraints)\n  } catch (err) {\n    console.warn('getUserMedia err', err)\n  }\n}\n\n"]}]}